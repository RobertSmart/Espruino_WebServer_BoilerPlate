"function postRequest(path, value, cb) {\r\n  var xmlHttp = new XMLHttpRequest();\r\n\r\n  // need to parse the response and send back to the calling function\r\n\r\n  xmlHttp.onreadystatechange = function()\r\n  {\r\n    if (xmlHttp.readyState == XMLHttpRequest.DONE) {\r\n      if (xmlHttp.status == 200)\r\n      {\r\n        if(cb) cb(xmlHttp.responseText);\r\n      } else {\r\n        console.log(xmlHttp.status);\r\n      }\r\n    }\r\n  }\r\n\r\n  var json = JSON.stringify({\r\n    value: value\r\n  });\r\n  xmlHttp.open(\"POST\", path, true);\r\n  xmlHttp.setRequestHeader(\"Content-type\", \"application/json\");\r\n  xmlHttp.send(json);\r\n}\r\n\r\nfunction getRequest(path, cb) {\r\n  var xmlHttp = new XMLHttpRequest();\r\n\r\n  xmlHttp.onreadystatechange = function () {\r\n    if (xmlHttp.readyState == XMLHttpRequest.DONE) {\r\n      if (xmlHttp.status == 200) {\r\n        var data = JSON.parse(xmlHttp.responseText);\r\n        if(cb) cb(data)\r\n      } else {\r\n        console.log('Refresh failed: ' + xmlHttp.status);\r\n      }\r\n    }\r\n  }\r\n\r\n  xmlHttp.open(\"GET\", path);\r\n  xmlHttp.send();\r\n}\r\n\r\n// function updateValue(value) {\r\n//   if (value > 100) {\r\n//     value = 100\r\n//   }\r\n//   if (value < 0) {\r\n//     value = 0\r\n//   }\r\n//   document.getElementById('setPercent').value = parseInt(value)\r\n//   postRequest('data', value, null)\r\n// }\r\n\r\nfunction submitBLEId() {\r\n  var creds = {\r\n    id:document.getElementById('BLESelect').value\r\n  }\r\n  postRequest('ble', creds, function (text) {\r\n    console.log(text)\r\n  })\r\n}\r\n\r\nfunction populateBLEList() {\r\n  getRequest('/ble_list', function (aplist) {\r\n    // let aps = JSON.parse\r\n    var x = document.getElementById(\"BLESelect\");\r\n    aplist.forEach(function (el) {\r\n      if (el.id == \"\") return\r\n      var option = document.createElement(\"option\");\r\n      option.text = el.id + \" | rssi \" + el.rssi;\r\n      option.value = el.id\r\n      x.add(option, x[0]);\r\n    })\r\n  })\r\n}\r\n"